{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="hero" id="home">
    <!-- Video Background -->
    {% if content and content.hero_video %}
    <div class="hero-video-bg">
        <video autoplay muted loop playsinline id="heroVideo">
            {% if content.hero_video.startswith('http') %}
            <source src="{{ content.hero_video }}" type="video/mp4">
            {% else %}
            <source src="{{ url_for('static', filename='videos/' + content.hero_video) }}" type="video/mp4">
            {% endif %}
        </video>
        <div class="video-overlay"></div>
    </div>
    {% endif %}

    <div class="hero-content">
        <div class="hero-text">
            <span class="hero-label">{{ content.hero_label }}</span>
            <h1>{{ content.hero_title }}</h1>
            <p>{{ content.hero_description }}</p>
            <div class="hero-buttons">
                <a href="#products" class="btn btn-primary">Explore Technology</a>
                <a href="#contact" class="btn btn-secondary">Get Quote</a>
            </div>
        </div>
        <div class="hero-stats">
            <div class="stat-box">
                <h3>{{ content.stat1_number }}</h3>
                <p>{{ content.stat1_text }}</p>
            </div>
            <div class="stat-box">
                <h3>{{ content.stat2_number }}</h3>
                <p>{{ content.stat2_text }}</p>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="features" id="features">
    <div class="features-container">
        <div class="section-header">
            <p class="section-label">{{ content.features_label }}</p>
            <h2>{{ content.features_title }}</h2>
            <p>{{ content.features_description }}</p>
        </div>
        
        <div class="features-grid">
            {% for feature in features %}
            <div class="feature-box">
                <h3>{{ feature.title }}</h3>
                <p>{{ feature.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Products Section -->
<section class="products" id="products">
    <div class="products-container">
        <div class="section-header">
            <p class="section-label">{{ content.products_label }}</p>
            <h2>{{ content.products_title }}</h2>
            <p>{{ content.products_description }}</p>
        </div>
        
        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <div class="product-image-gallery">
                    {% set all_images = [] %}
                    {% if product.image %}
                        {% if product.image.startswith('http') %}
                            {% set _ = all_images.append(product.image) %}
                        {% else %}
                            {% set _ = all_images.append(url_for('static', filename='images/products/' + product.image)) %}
                        {% endif %}
                    {% endif %}
                    {% for img in product.images|sort(attribute='order') %}
                        {% if img.image_url.startswith('http') %}
                            {% set _ = all_images.append(img.image_url) %}
                        {% else %}
                            {% set _ = all_images.append(url_for('static', filename='images/products/' + img.image_url)) %}
                        {% endif %}
                    {% endfor %}

                    {% if all_images|length > 0 %}
                    <div class="product-carousel">
                        {% for img_url in all_images %}
                        <div class="carousel-item {% if loop.first %}active{% endif %}">
                            <img src="{{ img_url }}" alt="{{ product.title }}">
                        </div>
                        {% endfor %}

                        {% if all_images|length > 1 %}
                        <button class="carousel-prev" aria-label="Previous image">‚Äπ</button>
                        <button class="carousel-next" aria-label="Next image">‚Ä∫</button>
                        <div class="carousel-indicators">
                            {% for img_url in all_images %}
                            <span class="indicator {% if loop.first %}active{% endif %}"></span>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="product-icon">üì¶</div>
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3>{{ product.title }}</h3>
                    <p class="product-description">{{ product.description }}</p>
                    <button class="product-link learn-more-btn">Learn More ‚Üí</button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Contact Section -->
<section class="contact" id="contact">
    <div class="contact-container">
        <div class="contact-info">
            <p class="contact-tagline">{{ content.contact_tagline }}</p>
            <h2>{{ content.contact_title }}</h2>
            <p>{{ content.contact_description }}</p>

            <div class="contact-details">
                <div class="contact-item">
                    <div class="contact-icon">üìç</div>
                    <div class="contact-text">
                        <h4>‚óÜ Location</h4>
                        <p>{{ content.contact_address | replace('\n', '<br>') | safe }}</p>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">üìû</div>
                    <div class="contact-text">
                        <h4>‚óÜ Phone</h4>
                        <p>{{ content.contact_phone }}</p>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">‚úâÔ∏è</div>
                    <div class="contact-text">
                        <h4>‚óÜ Email</h4>
                        <p>{{ content.contact_email }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="map-container">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3819.4067!2d96.1478933!3d16.8203331!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30c1eb0053889099%3A0x1c5ca74f767ae95d!2sBeauty%20Heaven%20Aesthetic!5e0!3m2!1sen!2smm!4v1735417200000"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                title="Altius BioTech Location - Beauty Heaven Aesthetic">
            </iframe>
        </div>
    </div>
</section>
{% endblock %}